(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[237],{3476:function(e,n){"use strict";n.Z={src:"/_next/static/media/logo.5e3442f0.png",height:289,width:310,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAArklEQVR42mP4//8/AxAr/Pv3z/Pzt48iQDYTEDOAcMwyIUYw4/ef3wJA+gwQZ9x+fl1AeAaDaNF6Xy6QHMPff391gIxpP359n1q/JTHSYR6DWcIKhdqYZfwaYAVAoxWBeC2Q08fQw+CZuELtfswywSMgydjlwmArwBioSAhiL38mUGIS0H5umAkgRzEjHCZcBJR8DMRXgFgBbsKnbx8ZoS5fELNceCqQto9ZJsQHAIgviQmOwgQrAAAAAElFTkSuQmCC"}},9237:function(e,n,t){"use strict";t.d(n,{Z:function(){return Y}});var s=t(5893),i=t(7294),r=t(8193),l=t(9583),a=t(5434),c=t(6893),o=t(3854),d=t(5675),x=t.n(d),h=t(1664),u=t.n(h),j=t(1163),f=t(1895),p=t(7398),g=t(8790),m=t(4151),b=t(5684),v=t(5),A=t.n(v),k=function(){return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1366 401",children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"linear-gradient",x1:"74.18",y1:"-159.13",x2:"1247.61",y2:"518.34",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0",stopColor:"#202e3b"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#515463"})]})}),(0,s.jsx)("g",{id:"Layer_2","data-name":"Layer 2",children:(0,s.jsx)("g",{id:"Layer_1-2","data-name":"Layer 1",children:(0,s.jsx)("path",{className:"cls-1",style:{fill:"url(#linear-gradient)"},d:"M0,0H1366V274.46s-160,37.21-437,44.65-315-34.42-581-36.28S0,307,0,307Z"})})})]})},C=t(7568),w=t(828),y=t(4051),N=t.n(y),_=t(8100),E=t(9669),R=t.n(E),T=t(7375),D=t(2684),S=t(6871),I=t(7496),Z=t(9609),H=t(5193),U=function(e){var n=e.count,t=e.onClick;return(0,s.jsx)(H.hU,{backgroundColor:"blackAlpha.100",_hover:{backgroundColor:"blackAlpha.300"},_active:{backgroundColor:"blackAlpha.400"},mr:2,size:"lg",fontSize:"xl",onClick:t,icon:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.YaO,{}),!!n&&(0,s.jsx)(g.xu,{as:"span",bgColor:"red",p:1,position:"absolute",top:1,right:"5px",fontSize:"xx-small",rounded:"full",children:n})]})})},L=t(2740),z=function(){var e=(0,j.useRouter)(),n=(0,f.a)().token,t=(0,T.qY)(),i=t.isOpen,r=(t.onOpen,t.onClose),l=t.onToggle,a=(0,w.Z)((0,D.ac)("(max-width: 768px)"),1)[0],c=(0,_.ZP)("/api/users/notification",function(){var e=(0,C.Z)(N().mark((function e(t){var s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R().get(t,{headers:{Authorization:"Bearer ".concat(n)}});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).data;return a?(0,s.jsx)(U,{count:null===c||void 0===c?void 0:c.filter((function(e){return"UNREAD"===e.status})).length,onClick:function(){return e.push("/notification")}}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U,{count:null===c||void 0===c?void 0:c.filter((function(e){return"UNREAD"===e.status})).length,onClick:l}),(0,s.jsxs)(S.h_,{children:[i&&(0,s.jsx)(g.xu,{w:"full",h:"full",position:"fixed",top:0,left:0,onClick:r}),(0,s.jsx)(I.pT,{in:i,unmountOnExit:!0,children:(0,s.jsxs)(g.kC,{flexDir:"column",position:"absolute",top:20,right:10,textColor:"black",bg:"whiteAlpha.800",backdropFilter:"auto",backdropBlur:"lg",width:500,shadow:"lg",rounded:"lg",overflowY:"auto",maxHeight:"500px",className:"scrollbar",children:[(0,s.jsx)(g.xv,{marginX:4,my:3,fontWeight:"semibold",fontSize:"lg",children:"Notification"}),(0,s.jsx)(g.iz,{}),c?(0,s.jsxs)(s.Fragment,{children:[c.filter((function(e){return"UNREAD"===e.status})).length>0&&(0,s.jsx)(g.xv,{margin:4,my:2,fontWeight:"semibold",className:"text-lime-600",children:"Unread"}),c.filter((function(e){return"UNREAD"===e.status})).map((function(e,n){return(0,s.jsx)(L.Z,{notification:e,onClick:r},n)})),c.filter((function(e){return"READ"===e.status})).length>0&&(0,s.jsx)(g.xv,{margin:4,my:2,fontWeight:"semibold",className:"text-lime-600",children:"Earlier"}),c.filter((function(e){return"READ"===e.status})).map((function(e,n){return(0,s.jsx)(L.Z,{notification:e,onClick:r},n)}))]}):(0,s.jsxs)(g.kC,{alignItems:"center",justifyContent:"center",padding:4,gap:4,children:[(0,s.jsx)(Z.$,{}),(0,s.jsx)(g.xv,{children:"Loading..."})]}),0===(null===c||void 0===c?void 0:c.length)&&(0,s.jsx)(g.xv,{padding:4,color:"gray.600",children:"You have no notification"})]})})]})]})},Q=function(){var e=(0,f.a)(),n=e.user,t=e.logout,i=(0,j.useRouter)();return(0,s.jsxs)("div",{className:"".concat(A().header," relative"),children:[(0,s.jsxs)("div",{className:"container p-2 z-10 flex items-center justify-between",children:[(0,s.jsxs)("h1",{className:"font-bold text-xl logo",children:["TIMES ",(0,s.jsx)("span",{className:"font-normal",children:"Ticketing"})]}),(0,s.jsxs)(g.kC,{alignItems:"center",children:[(0,s.jsx)(z,{}),(0,s.jsxs)(m.v2,{children:[(0,s.jsx)(m.j2,{as:"div",className:"cursor-pointer",children:(0,s.jsxs)("div",{className:A().profile,children:[(0,s.jsx)("p",{children:null===n||void 0===n?void 0:n.name}),(0,s.jsx)(b.qE,{name:null===n||void 0===n?void 0:n.name})]})}),(0,s.jsx)(m.qy,{textColor:"gray.800",children:(0,s.jsx)(m.sN,{color:"red.500",onClick:function(){i.replace("/auth"),t()},children:"Logout"})})]})]})]}),(0,s.jsx)("div",{className:"w-full h-60 self-start z-0 absolute",children:(0,s.jsx)(k,{})})]})},F=t(3476),O=t(2884),W=t.n(O),Y=function(e){var n=(0,j.useRouter)(),t=(0,f.a)(),d=t.role,h=t.privileges,g=t.logout,m=n.pathname;return(0,s.jsxs)("div",{className:"flex w-full",children:[(0,s.jsx)("aside",{className:W().sidebar,children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)(u(),{href:"/",children:(0,s.jsx)("a",{children:(0,s.jsx)("div",{className:"relative w-full h-full",children:(0,s.jsx)(x(),{alt:"times-logo",src:F.Z,layout:"fill",objectFit:"contain"})})})})}),(0,s.jsx)("li",{children:(0,s.jsx)(u(),{href:"/",children:(0,s.jsx)("a",{className:"".concat("/"===m&&"bg-slate-500"),children:(0,s.jsx)(p.u,{label:"Home",placement:"right",children:(0,s.jsx)("span",{children:(0,s.jsx)(r.V9Z,{})})})})})}),h.includes("TICKET_CREATE")&&(0,s.jsx)("li",{children:(0,s.jsx)(u(),{href:"/ticket/new",children:(0,s.jsx)("a",{className:"".concat("/ticket/new"===m&&"bg-slate-500"),children:(0,s.jsx)(p.u,{label:"Add Ticket",placement:"right",children:(0,s.jsx)("span",{children:(0,s.jsx)(l.KHI,{})})})})})}),"Administrator"===d&&(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)("li",{children:(0,s.jsx)(u(),{href:"/subject",children:(0,s.jsx)("a",{className:"".concat("/subject"===m&&"bg-slate-500"),children:(0,s.jsx)(p.u,{label:"Subject Cases",placement:"right",children:(0,s.jsx)("span",{children:(0,s.jsx)(a.sZk,{})})})})})}),(0,s.jsx)("li",{children:(0,s.jsx)(u(),{href:"/product",passHref:!0,children:(0,s.jsx)("a",{className:"".concat("/product"===m&&"bg-slate-500"),children:(0,s.jsx)(p.u,{label:"Products",placement:"right",children:(0,s.jsx)("span",{children:(0,s.jsx)(r.w48,{})})})})})}),(0,s.jsx)("li",{children:(0,s.jsx)(u(),{href:"/admin/register",passHref:!0,children:(0,s.jsx)("a",{className:"".concat("/admin/register"===m&&"bg-slate-500"),children:(0,s.jsx)(p.u,{label:"Register User",placement:"right",children:(0,s.jsx)("span",{children:(0,s.jsx)(c.zy7,{})})})})})}),(0,s.jsx)("li",{children:(0,s.jsx)(u(),{href:"/admin/report",passHref:!0,children:(0,s.jsx)("a",{className:"".concat("/admin/report"===m&&"bg-slate-500"),children:(0,s.jsx)(p.u,{label:"Issue A Report",placement:"right",children:(0,s.jsx)("span",{children:(0,s.jsx)(o.rkW,{})})})})})})]}),(0,s.jsx)("li",{className:"mt-auto",children:(0,s.jsx)("a",{onClick:g,children:(0,s.jsx)(p.u,{label:"Logout",placement:"right",children:(0,s.jsx)("span",{className:"text-red-500",children:(0,s.jsx)(a.LvP,{})})})})})]})}),(0,s.jsxs)("div",{className:"flex-1 bg-slate-100 overflow-x-scroll",children:[(0,s.jsx)(Q,{}),(0,s.jsx)("div",{className:"relative w-full",children:e.children})]})]})}},2740:function(e,n,t){"use strict";var s=t(5893),i=(t(7294),t(381)),r=t.n(i),l=t(1664),a=t.n(l),c=t(8790);n.Z=function(e){var n,t=e.notification,i=e.onClick;return"TICKET_COMMENT"===t.type?n=(0,s.jsxs)(c.xv,{children:[(0,s.jsx)(c.xv,{as:"span",fontWeight:"semibold",children:t.actor})," ","commented on ticket ",t.payload.ticket_id,":",' "',t.payload.comment_body.slice(0,30),"...",'"']}):"TICKET_PROGRESS"===t.type?n=(0,s.jsxs)(c.xv,{children:[(0,s.jsx)(c.xv,{as:"span",fontWeight:"semibold",children:t.actor})," ","take your ticket with ID: ",t.payload.ticket_id]}):"TICKET_CLOSED"===t.type?n=(0,s.jsxs)(c.xv,{children:[(0,s.jsx)(c.xv,{as:"span",fontWeight:"semibold",children:t.actor})," ","closed a ticket with ID: ",t.payload.ticket_id]}):"TICKET_CREATE"===t.type&&(n=(0,s.jsxs)(c.xv,{children:[(0,s.jsx)(c.xv,{as:"span",fontWeight:"semibold",children:t.actor})," ","created a ticket with ID: ",t.payload.ticket_id," about"," ",t.payload.subject," at ",t.payload.event_location]})),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a(),{href:"/ticket/".concat(t.payload.ticket_id),children:(0,s.jsxs)(c.kC,{bg:"UNREAD"===t.status?"blackAlpha.100":"transparent",p:4,borderLeft:"UNREAD"===t.status?"4px":null,borderColor:"limegreen",justifyContent:"space-between",gap:4,cursor:"pointer",onClick:i,_hover:{backgroundColor:"blackAlpha.200"},children:[n,(0,s.jsx)(c.xv,{fontSize:"xs",whiteSpace:"nowrap",color:"gray.600",children:r()(t.created_at).fromNow()})]})}),(0,s.jsx)(c.iz,{})]})}},5:function(e){e.exports={header:"Header_header__lyvpD",profile:"Header_profile__1Hr4t"}},2884:function(e){e.exports={sidebar:"SideBarLayout_sidebar__uF_VV"}}}]);
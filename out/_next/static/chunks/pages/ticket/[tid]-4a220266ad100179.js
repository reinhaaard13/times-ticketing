(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[352],{4107:function(e,t,n){"use strict";n.d(t,{N2:function(){return j},Od:function(){return p},s7:function(){return v}});var i=n(2684),s=n(2846),c=n(917),r=n(7375),o=n(5031),a=n(7294);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}function d(e,t){if(null==e)return{};var n,i,s={},c=Object.keys(e);for(i=0;i<c.length;i++)n=c[i],t.indexOf(n)>=0||(s[n]=e[n]);return s}var u=["startColor","endColor","isLoaded","fadeDuration","speed","className"],m=["noOfLines","spacing","skeletonHeight","className","startColor","endColor","isLoaded","fadeDuration","speed","children"],h=["size"],x=(0,s.m$)("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),f=(0,c.F4)({from:{opacity:0},to:{opacity:1}}),p=(0,s.Gp)((function(e,t){var n=(0,s.mq)("Skeleton",e),i=function(){var e=a.useRef(!0);return a.useEffect((function(){e.current=!1}),[]),e.current}(),c=(0,s.Lr)(e);c.startColor,c.endColor;var m=c.isLoaded,h=c.fadeDuration;c.speed;var p=c.className,j=d(c,u),v=(0,r.D9)(m),k=(0,o.cx)("chakra-skeleton",p);if(m){var g=i||v?"none":f+" "+h+"s";return a.createElement(s.m$.div,l({ref:t,className:k,__css:{animation:g}},j))}return a.createElement(x,l({ref:t,className:k},j,{__css:n}))}));p.defaultProps={fadeDuration:.4,speed:.8},o.Ts&&(p.displayName="Skeleton");var j=function(e){var t=e.noOfLines,n=void 0===t?3:t,c=e.spacing,r=void 0===c?"0.5rem":c,u=e.skeletonHeight,h=void 0===u?"0.5rem":u,x=e.className,f=e.startColor,j=e.endColor,v=e.isLoaded,k=e.fadeDuration,g=e.speed,b=e.children,C=d(e,m),_=(0,i.Sx)("number"===typeof n?[n]:n)||3,S=Array(_).fill(1).map((function(e,t){return t+1})),y=function(e){return _>1&&e===S.length?"80%":"100%"},w=(0,o.cx)("chakra-skeleton__group",x);return a.createElement(s.m$.div,l({className:w},C),S.map((function(e,t){if(v&&t>0)return null;var n=v?null:{mb:e===S.length?"0":r,width:y(e),height:h};return a.createElement(p,l({key:S.length.toString()+e,startColor:f,endColor:j,isLoaded:v,fadeDuration:k,speed:g},n),0===t?b:void 0)})))};o.Ts&&(j.displayName="SkeletonText");var v=function(e){var t=e.size,n=void 0===t?"2rem":t,i=d(e,h);return a.createElement(p,l({borderRadius:"full",boxSize:n},i))};o.Ts&&(v.displayName="SkeletonCircle")},3441:function(e,t,n){"use strict";n.d(t,{g:function(){return d}});var i=n(9762),s=n(2846),c=n(5031),r=n(7294);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}var a=["className","rows"],l=["h","minH","height","minHeight"],d=(0,s.Gp)((function(e,t){var n=(0,s.mq)("Textarea",e),d=(0,s.Lr)(e),u=d.className,m=d.rows,h=function(e,t){if(null==e)return{};var n,i,s={},c=Object.keys(e);for(i=0;i<c.length;i++)n=c[i],t.indexOf(n)>=0||(s[n]=e[n]);return s}(d,a),x=(0,i.Yp)(h),f=m?(0,c.CE)(n,l):n;return r.createElement(s.m$.textarea,o({ref:t,rows:m},x,{className:(0,c.cx)("chakra-textarea",u),__css:f}))}));c.Ts&&(d.displayName="Textarea")},5536:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ticket/[tid]",function(){return n(6090)}])},7087:function(e,t,n){"use strict";var i=n(5893),s=(n(7294),n(4641)),c=n.n(s),r=n(7361);t.Z=function(e){var t="LOW"===e.severity?c().badge_low:"MEDIUM"===e.severity?c().badge_medium:"HIGH"===e.severity?c().badge_high:"CRITICAL"===e.severity&&c().badge_critical;return(0,i.jsx)("span",{className:"".concat(c().badge," ").concat(t," ").concat(e.checked&&c().checked),children:"".concat(r.Y.find((function(t){return t.label===e.severity})).label)})}},8794:function(e,t,n){"use strict";var i=n(7568),s=n(4051),c=n.n(s),r=n(5893),o=(n(7294),n(381)),a=n.n(o),l=n(9669),d=n.n(l),u=n(1895),m=n(5074),h=n(6658),x=n(8790),f=n(5193),p=n(5434),j=n(9583),v=n(7087);t.Z=function(e){var t,n,s,o,l,k,g,b=(0,u.a)().token,C=(0,m.pm)(),_=function(){var t=(0,i.Z)(c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d().patch("/api/tickets/".concat(e.ticket.ticket_id,"/status"),{status:"PROGRESS"},{headers:{Authorization:"Bearer ".concat(b)}});case 3:t.sent,e.onConfirm(),e.onClose(),t.next=14;break;case 8:t.prev=8,t.t0=t.catch(0),e.onClose(),console.log(t.t0),C({title:"An error occured",description:"".concat(null===(n=t.t0.response)||void 0===n?void 0:n.data.error),position:"top",status:"error",isClosable:!0,variant:"left-accent"});case 14:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return(0,r.jsxs)(h.u_,{isOpen:e.isOpen,onClose:e.onClose,children:[(0,r.jsx)(h.ZA,{}),(0,r.jsxs)(h.hz,{children:[(0,r.jsx)(h.xB,{children:"Ticket Description"}),(0,r.jsx)(h.ol,{}),(0,r.jsx)(h.fe,{children:(0,r.jsxs)(x.aV,{className:"text-slate-800/80",spacing:2,children:[(0,r.jsxs)(x.HC,{children:[(0,r.jsx)(x.DE,{as:p.YTL,color:"teal"}),"Severity:"," ",(0,r.jsx)(v.Z,{severity:null===(t=e.ticket)||void 0===t?void 0:t.CaseSubject.severity})]}),(0,r.jsxs)(x.HC,{children:[(0,r.jsx)(x.DE,{as:j.QHb,color:"teal"}),"Ticket ID:"," ",(0,r.jsx)("span",{className:"font-semibold uppercase text-slate-800",children:null===(n=e.ticket)||void 0===n?void 0:n.ticket_id})]}),(0,r.jsxs)(x.HC,{children:[(0,r.jsx)(x.DE,{as:p.dBs,color:"teal"}),"Product:"," ",(0,r.jsx)("span",{className:"font-semibold text-slate-800",children:null===(s=e.ticket)||void 0===s?void 0:s.Product.product_name})]}),(0,r.jsxs)(x.HC,{children:[(0,r.jsx)(x.DE,{as:p.Vyx,color:"teal"}),"Name:"," ",(0,r.jsx)("span",{className:"font-semibold text-slate-800",children:null===(o=e.ticket)||void 0===o?void 0:o.cust_name})]}),(0,r.jsxs)(x.HC,{children:[(0,r.jsx)(x.DE,{as:p.vcr,color:"teal"}),"Event Location:"," ",(0,r.jsx)("span",{className:"font-semibold text-slate-800",children:null===(l=e.ticket)||void 0===l?void 0:l.location})]}),(0,r.jsxs)(x.HC,{children:[(0,r.jsx)(x.DE,{as:p.o2E,color:"teal"}),"Created at:"," ",(0,r.jsx)("span",{className:"font-semibold text-slate-800",children:a()(null===(k=e.ticket)||void 0===k?void 0:k.created_date).format("YYYY-MM-DD HH:mm:ss")})]}),(0,r.jsxs)(x.HC,{children:[(0,r.jsx)(x.DE,{as:p.aHI,color:"teal"}),"Subject:"," ",(0,r.jsx)("span",{className:"font-semibold text-slate-800",children:null===(g=e.ticket)||void 0===g?void 0:g.CaseSubject.subject})]})]})}),(0,r.jsxs)(h.mz,{children:[(0,r.jsx)(f.zx,{mr:3,onClick:e.onClose,children:"Cancel"}),(0,r.jsx)(f.zx,{colorScheme:"blue",onClick:_,children:"Take This Ticket"})]})]})]})}},7361:function(e,t,n){"use strict";n.d(t,{Y:function(){return i}});var i=[{level:1,label:"LOW",handle_in:10},{level:2,label:"MEDIUM",handle_in:5},{level:3,label:"HIGH",handle_in:3},{level:4,label:"CRITICAL",handle_in:1}]},6090:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var i=n(7568),s=n(4051),c=n.n(s),r=n(5893),o=n(7294),a=n(9008),l=n.n(a),d=n(8100),u=n(9669),m=n.n(u),h=n(1163),x=n(5434),f=n(8790),p=n(4107),j=n(1895),v=n(381),k=n.n(v),g=function(){return(0,r.jsxs)(f.kC,{gap:4,mb:6,children:[(0,r.jsx)(p.s7,{size:12}),(0,r.jsxs)(f.kC,{direction:"column",w:"full",children:[(0,r.jsxs)(f.Ug,{w:"full",children:[(0,r.jsx)(p.Od,{height:4,w:24}),(0,r.jsx)(p.Od,{height:3,w:24})]}),(0,r.jsx)(p.N2,{marginTop:4,noOfLines:3,spacing:2})]})]})},b=n(5684),C=n(894),_=n(3750),S=function(e){var t=e.attachment,n={docx:_.SiT,doc:_.SiT,xlsx:_.WRA,xls:_.WRA,pptx:_.emM,ppt:_.emM,mp3:_.Ei1,jpg:_.boB,png:_.boB,mp4:_.GxQ,txt:_.Q9V,pdf:_.Edw};return(0,r.jsx)("a",{href:"http://10.20.21.165/"+t.attachment_url,target:"_blank",rel:"noreferrer",children:(0,r.jsxs)(f.kC,{border:"1px",borderColor:"gray.300",px:4,py:2,alignItems:"center",rounded:"lg",transition:"all 0.2s ease-in-out",overflow:"clip",transform:"translateY(0)",_hover:{backgroundColor:"gray.100",shadow:"md",transform:"translateY(-1px)",overflow:"clip"},children:[(0,r.jsx)(C.JO,{as:n[t.attachment_url.split(".").pop()],fontSize:"7xl",opacity:.4,position:"absolute",right:0,top:-2}),(0,r.jsxs)(f.xu,{ml:3,children:[(0,r.jsx)(f.xv,{ml:2,fontWeight:"semibold",children:t.attachment_url.split("\\").pop()}),(0,r.jsx)(f.xv,{ml:2,textColor:"gray.500",children:t.attachment_url.split(".").pop().toUpperCase()})]})]})})},y=function(e){var t=e.comment;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.kC,{gap:4,my:3,children:[(0,r.jsx)(b.qE,{bg:"red.500",name:t.User.name}),(0,r.jsxs)(f.kC,{direction:"column",children:[(0,r.jsxs)(f.kC,{alignItems:"baseline",gap:2,children:[(0,r.jsx)(f.xv,{fontSize:"md",fontWeight:"semibold",children:t.User.name}),(0,r.jsx)(f.xv,{fontSize:"sm",textColor:"GrayText",children:k()(t.created_date).fromNow()})]}),(0,r.jsx)(f.xv,{fontSize:"sm",children:t.comment_body}),t.Attachment&&(0,r.jsx)(S,{attachment:t.Attachment})]})]}),(0,r.jsx)(f.iz,{})]})},w=function(e){var t;return(0,r.jsxs)(f.kC,{direction:"column",children:[(0,r.jsx)(f.xv,{fontSize:"md",mb:3,fontWeight:"semibold",className:"text-lime-500",children:"Comments"}),e.comments?e.comments.map((function(e){return(0,r.jsx)(y,{comment:e},e.comment_id)})):(0,r.jsx)(g,{}),0===(null===(t=e.comments)||void 0===t?void 0:t.length)&&("OPEN"===e.status?(0,r.jsx)(f.xv,{fontSize:"sm",alignSelf:"center",mb:8,children:"Ticket has not been taken."}):(0,r.jsx)(f.xv,{fontSize:"sm",alignSelf:"center",mb:8,children:"No comments yet"}))]})},N=n(2175),O=n(3441),E=n(5193),z=n(4612),D=n(9352),T=function(e){var t=(0,d.kY)().mutate,n=(0,j.a)(),s=n.user,a=n.token,l=(0,o.useRef)(),u=(0,N.TA)({initialValues:{comment:"",attachment:""},validate:function(e){var t={};return e.comment||(t.comment="Required"),t},onSubmit:function(){var n=(0,i.Z)(c().mark((function n(i){var s;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u.setSubmitting(!0),(s=new FormData).append("comment_body",i.comment),s.append("attachment",i.attachment),n.prev=4,n.next=7,m().post("/api/tickets/".concat(e.ticketId,"/comments"),s,{headers:{Authorization:"Bearer ".concat(a)}});case 7:n.sent,t("/api/tickets/".concat(e.ticketId,"/comments")),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),console.log(n.t0);case 14:l.current.value="",u.setSubmitting(!1),u.resetForm();case 17:case"end":return n.stop()}}),n,null,[[4,11]])})));return function(e){return n.apply(this,arguments)}}()});return(0,r.jsx)("form",{onSubmit:u.handleSubmit,children:(0,r.jsxs)(f.kC,{direction:"column",gap:4,children:[(0,r.jsx)(O.g,{placeholder:"Add a comment as ".concat(null===s||void 0===s?void 0:s.name),resize:"none",name:"comment",value:u.values.comment,onChange:u.handleChange,onBlur:u.handleBlur}),u.values.attachment&&(0,r.jsxs)(f.kC,{px:2,py:2,height:"fit-content",background:"teal",rounded:5,alignItems:"center",justifyContent:"space-between",children:[(0,r.jsx)(f.xv,{fontSize:"sm",fontWeight:"medium",color:"white",mr:2,children:u.values.attachment.name}),(0,r.jsx)(E.hU,{icon:(0,r.jsx)(D.eSQ,{}),size:"xs",colorScheme:"blackAlpha",onClick:function(e){u.setFieldValue("attachment",null),l.current.value=""}})]}),(0,r.jsxs)(f.kC,{alignSelf:"flex-end",w:"full",alignItems:"center",children:[(0,r.jsx)(z.II,{type:"file",visibility:"hidden",ref:l,onChange:function(e){var t=e.target.files[0];(null===t||void 0===t?void 0:t.size)>1e7?u.setErrors({attachment:"Attachment size is too large"}):t?u.setFieldValue("attachment",t):u.setFieldValue("attachment",null)}}),(0,r.jsx)(E.hU,{icon:(0,r.jsx)(D.csO,{}),mr:2,onClick:function(e){console.log(l),l.current.click()}}),(0,r.jsx)(E.zx,{colorScheme:"teal",type:"submit",disabled:!u.isValid,isLoading:u.isSubmitting,width:64,children:"Submit"})]})]})})},H=n(7375),I=n(5074),L=n(7516),P=n(9583),A=n(7087),B=n(6658),R=function(e){var t=e.isOpen,n=e.onClose,s=e.ticketId,a=(0,o.useRef)(),l=(0,j.a)().token,u=(0,d.kY)().mutate,h=(0,I.pm)(),x=function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().patch("/api/tickets/".concat(s,"/status"),{status:"CLOSED",solution:a.current.value},{headers:{Authorization:"Bearer ".concat(l)}});case 2:t=e.sent,h({title:"Ticket Closed",description:"The ticket with ID ".concat(s," has been closed"),position:"top",status:"success",isClosable:!0,variant:"left-accent"}),u("/api/tickets/".concat(s),t.data.ticket,{optimisticData:t.data.ticket}),n();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(B.u_,{isOpen:t,onClose:n,children:[(0,r.jsx)(B.ZA,{}),(0,r.jsxs)(B.hz,{children:[(0,r.jsx)(B.xB,{children:"Close Ticket"}),(0,r.jsx)(B.ol,{}),(0,r.jsxs)(B.fe,{children:[(0,r.jsx)(f.xv,{fontSize:"large",fontWeight:"semibold",children:"You are closing this ticket"}),(0,r.jsx)(f.xv,{fontSize:"sm",mb:4,color:"red",children:"Please note that this action cannot be undone"}),(0,r.jsx)(f.xv,{mb:1,children:"Please tell the solution of this ticket"}),(0,r.jsx)(O.g,{ref:a,placeholder:"Solution",resize:"none",mb:2})]}),(0,r.jsxs)(B.mz,{children:[(0,r.jsx)(E.zx,{onClick:n,children:"Cancel"}),(0,r.jsx)(E.zx,{colorScheme:"red",ml:2,onClick:x,children:"Close Ticket"})]})]})]})},Y=n(8794),Z=function(e){var t,n,i,s,c,o,a,l,u,m=(0,j.a)(),h=m.user,v=m.privileges,g=(0,d.kY)().mutate,b=(0,H.qY)(),C=b.isOpen,_=b.onClose,y=b.onOpen,w=(0,I.pm)();return(0,r.jsxs)(r.Fragment,{children:["PROGRESS"===(null===(t=e.ticket)||void 0===t?void 0:t.status)&&(0,r.jsx)(R,{isOpen:C,onClose:_,ticketId:null===(n=e.ticket)||void 0===n?void 0:n.ticket_id}),"OPEN"===(null===(i=e.ticket)||void 0===i?void 0:i.status)&&(0,r.jsx)(Y.Z,{isOpen:C,onClose:_,onConfirm:function(){w({title:"You have taken this ticket",description:"The ticket with ID ".concat(e.ticket.ticket_id," has been taken by you"),position:"top",status:"success",isClosable:!0,variant:"left-accent"}),g("/api/tickets/".concat(e.ticket.ticket_id))},ticket:e.ticket}),(0,r.jsxs)(f.kC,{flexDir:"column",children:[(0,r.jsxs)(f.kC,{w:["full","full","sm"],h:"fit-content",bg:"whiteAlpha.900",backdropFilter:"auto",backdropBlur:"md",rounded:"xl",shadow:"lg",direction:"column",p:4,children:[(0,r.jsx)(f.xv,{fontSize:"md",mb:4,fontWeight:"semibold",className:"text-lime-500",children:"Ticket Description"}),e.ticket?(0,r.jsxs)(f.aV,{spacing:2,fontSize:"sm",mb:4,children:[(0,r.jsxs)(f.HC,{children:[(0,r.jsx)(f.DE,{as:x.YTL,color:"teal"}),"Severity: ",(0,r.jsx)(A.Z,{severity:e.ticket.CaseSubject.severity})]}),(0,r.jsxs)(f.HC,{children:[(0,r.jsx)(f.DE,{as:P.QHb,color:"teal"}),"Ticket:"," ",(0,r.jsx)("span",{className:"font-medium",children:e.ticket.ticket_id})]}),(0,r.jsxs)(f.HC,{children:[(0,r.jsx)(f.DE,{as:x.dBs,color:"teal"}),"Product:"," ",(0,r.jsx)("span",{className:"font-medium",children:e.ticket.Product.product_name})]}),(0,r.jsxs)(f.HC,{children:[(0,r.jsx)(f.DE,{as:x.$Z1,color:"teal"}),"Sub Product:"," ",(0,r.jsx)("span",{className:"font-medium",children:e.ticket.Subproduct.subproduct_name})]}),(0,r.jsxs)(f.HC,{children:[(0,r.jsx)(f.DE,{as:x.Vyx,color:"teal"}),"Name:"," ",(0,r.jsx)("span",{className:"font-medium",children:e.ticket.cust_name})]}),(0,r.jsxs)(f.HC,{children:[(0,r.jsx)(f.DE,{as:x.J0S,color:"teal"}),"Phone:"," ",(0,r.jsx)("span",{className:"font-medium",children:e.ticket.cust_no})]}),(0,r.jsxs)(f.HC,{children:[(0,r.jsx)(f.DE,{as:x.ixJ,color:"teal"}),"Email:"," ",(0,r.jsx)("span",{className:"font-medium",children:e.ticket.cust_email})]}),(0,r.jsxs)(f.HC,{children:[(0,r.jsx)(f.DE,{as:x.vcr,color:"teal"}),"Event Location:"," ",(0,r.jsx)("span",{className:"font-medium",children:e.ticket.location})]}),(0,r.jsxs)(f.HC,{children:[(0,r.jsx)(f.DE,{as:x.o2E,color:"teal"}),"Created at:"," ",(0,r.jsx)("span",{className:"font-medium",children:k()(e.ticket.created_date).format("YYYY-MM-DD HH:mm:ss")})]}),(0,r.jsxs)(f.HC,{children:[(0,r.jsx)(f.DE,{as:x.sZk,color:"teal"}),"Subject:"," ",(0,r.jsx)("span",{className:"font-medium",children:e.ticket.CaseSubject.subject})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Od,{height:5,mb:2}),(0,r.jsx)(p.Od,{height:5,mb:2}),(0,r.jsx)(p.Od,{height:5,mb:2}),(0,r.jsx)(p.Od,{height:5,mb:2}),(0,r.jsx)(p.Od,{height:5,mb:2})]}),(null===(s=e.ticket)||void 0===s?void 0:s.created_by)===(null===h||void 0===h?void 0:h.id)&&"PROGRESS"===(null===(c=e.ticket)||void 0===c?void 0:c.status)&&(0,r.jsx)(E.zx,{colorScheme:"red",size:"sm",onClick:y,children:"Close Ticket"}),"OPEN"===(null===(o=e.ticket)||void 0===o?void 0:o.status)&&(null===(a=e.ticket)||void 0===a?void 0:a.created_by)!==(null===h||void 0===h?void 0:h.id)&&(null===v||void 0===v?void 0:v.includes("TICKET_ACTION"))&&(0,r.jsx)(E.zx,{size:"sm",colorScheme:"green",onClick:function(){y()},leftIcon:(0,r.jsx)(L.yf9,{}),w:"full",children:"Take"})]}),(0,r.jsxs)(f.kC,{w:["full","full","sm"],h:"fit-content",bg:"whiteAlpha.900",backdropFilter:"auto",backdropBlur:"md",rounded:"xl",shadow:"lg",mt:3,direction:"column",p:4,children:[(0,r.jsx)(f.xv,{fontSize:"md",mb:4,fontWeight:"semibold",className:"text-lime-500",children:"Attachments"}),(null===(l=e.ticket)||void 0===l?void 0:l.Attachments.length)>0?(0,r.jsx)(f.gC,{children:null===(u=e.ticket)||void 0===u?void 0:u.Attachments.map((function(e,t){return(0,r.jsx)(S,{attachment:e},t)}))}):(0,r.jsx)(f.xv,{textAlign:"center",padding:2,textColor:"gray.600",children:"No attachment"})]})]})]})},W=function(e){var t=e.solution,n=e.pic,i=e.closed_date;return(0,r.jsxs)(f.kC,{borderColor:"green.500",borderWidth:2,p:2,rounded:"lg",direction:"column",bgColor:"green.100",mb:4,children:[(0,r.jsxs)(f.xv,{fontWeight:"semibold",fontSize:"large",textColor:"green.500",mb:2,children:[(0,r.jsx)(C.JO,{as:x.smy,fontSize:"2xl",mr:2}),"This Ticket Has Been Closed"]}),(0,r.jsx)(f.iz,{mb:3}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.xv,{fontSize:"sm",children:"Solution: "}),(0,r.jsx)(f.xv,{mb:2,children:t})]}),(0,r.jsxs)(f.xv,{fontSize:"sm",textColor:"green.500",children:["Handled by: ",n]}),(0,r.jsxs)(f.xv,{fontSize:"sm",textColor:"green.500",children:["Closed at: ",k()(i).format("llll")]})]})},F=function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().get(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t,n,i,s,c,o=(0,j.a)().user,a=(0,d.ZP)("/api/tickets/".concat(null===(t=e.ticket)||void 0===t?void 0:t.ticket_id,"/comments"),F).data;return(0,r.jsxs)(f.kC,{w:"full",direction:["column-reverse","column-reverse","row"],gap:3,alignSelf:"center",justifyContent:"center",maxW:"full",children:[(0,r.jsxs)(f.kC,{w:"full",maxW:"container.md",h:"fit-content",bg:"whiteAlpha.900",backdropFilter:"auto",backdropBlur:"md",rounded:"xl",shadow:"lg",direction:"column",p:4,children:[(0,r.jsxs)(f.kC,{w:"full",justifyContent:"space-between",children:[(0,r.jsxs)(f.kC,{flexDir:"column",children:[(0,r.jsxs)(f.kC,{alignItems:"center",gap:2,children:[(0,r.jsx)(x.sZk,{}),(0,r.jsxs)(f.kC,{direction:"column",children:[(0,r.jsx)(f.xv,{letterSpacing:"wide",textTransform:"uppercase",textColor:"blackAlpha.500",fontSize:"sm",children:"Subject"}),e.ticket?(0,r.jsx)(f.xv,{fontSize:"md",className:"text-lime-500",fontWeight:"semibold",children:e.ticket.CaseSubject.subject}):(0,r.jsx)(p.Od,{height:5,width:"xs"})]})]}),(0,r.jsxs)(f.kC,{textColor:"GrayText",children:[(0,r.jsxs)(f.kC,{alignItems:"center",children:[(0,r.jsx)(x.f$3,{}),e.ticket?(0,r.jsxs)(f.xv,{marginLeft:2,fontSize:"xs",children:["issued ",k()(e.ticket.created_date).fromNow(),"."]}):(0,r.jsx)(p.Od,{ml:2,height:3,width:32})]}),(0,r.jsxs)(f.kC,{ml:4,alignItems:"center",children:[(0,r.jsx)(x.vcr,{}),e.ticket?(0,r.jsxs)(f.xv,{marginLeft:2,fontSize:"xs",children:["Event Location: ",e.ticket.location]}):(0,r.jsx)(p.Od,{ml:2,height:3,width:32})]})]})]}),e.ticket?(0,r.jsxs)(f.kC,{flexDir:"column",alignItems:"end",children:[(0,r.jsx)(f.Ct,{colorScheme:"OPEN"===e.ticket.status?"yellow":"PROGRESS"===e.ticket.status?"green":"gray",w:"fit-content",children:e.ticket.status}),e.ticket.pic&&(0,r.jsxs)(f.xv,{fontSize:"xs",children:["PIC: ",e.ticket.pic.name]})]}):(0,r.jsx)(p.Od,{height:5,width:20})]}),(0,r.jsx)(f.iz,{my:4}),"CLOSED"===(null===(n=e.ticket)||void 0===n?void 0:n.status)&&(0,r.jsx)(W,{solution:e.ticket.solution,pic:e.ticket.pic.name,closed_date:e.ticket.closed_date}),(0,r.jsx)(f.xv,{fontSize:"md",fontWeight:"semibold",className:"text-lime-500",children:"Description"}),e.ticket?(0,r.jsx)(f.xv,{fontSize:"initial",mb:"6",children:e.ticket.description}):(0,r.jsx)(p.N2,{mt:2,noOfLines:4,mb:"6",spacing:3}),(0,r.jsx)(w,{comments:null===a||void 0===a?void 0:a.comments,status:null===(i=e.ticket)||void 0===i?void 0:i.status}),(null===o||void 0===o?void 0:o.id)===(null===(s=e.ticket)||void 0===s?void 0:s.pic_id)||(null===o||void 0===o?void 0:o.id)===(null===(c=e.ticket)||void 0===c?void 0:c.created_by)?"PROGRESS"===e.ticket.status&&(0,r.jsx)(T,{ticketId:e.ticket.ticket_id,data:a}):null]}),(0,r.jsx)(Z,{ticket:e.ticket})]})},V=n(9237),M=function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().get(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=(0,h.useRouter)().query,n=(0,d.ZP)("/api/tickets/".concat(t.tid),M).data;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{children:(0,r.jsxs)("title",{children:["Ticket ",t.tid," Detail"]})}),(0,r.jsx)(V.Z,{children:(0,r.jsx)("div",{className:"flex flex-col container px-2 mt-4",children:(0,r.jsx)(G,{ticket:null===n||void 0===n?void 0:n.ticket})})})]})}},4641:function(e){e.exports={badge:"Badge_badge__gRwm0",badge_low:"Badge_badge_low__ZHIef",checked:"Badge_checked__yIQLV",badge_medium:"Badge_badge_medium__rNHa1",badge_high:"Badge_badge_high__FlPL4",badge_critical:"Badge_badge_critical__ZFOPm"}}},function(e){e.O(0,[228,445,617,556,885,874,937,13,781,518,69,658,237,774,888,179],(function(){return t=5536,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[303],{9042:function(e,n,t){"use strict";t.d(n,{Td:function(){return T},Th:function(){return g},Tr:function(){return w},hr:function(){return p},iA:function(){return x},p3:function(){return v},xJ:function(){return j}});var r=t(2846),c=t(5031),i=t(7294);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},s.apply(this,arguments)}function l(e,n){if(null==e)return{};var t,r,c={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(c[t]=e[t]);return c}var a=["overflow","overflowX","className"],o=["className"],d=["placement"],u=["isNumeric"],h=["isNumeric"],f=(0,r.eC)("Table"),b=f[0],m=f[1],j=(0,r.Gp)((function(e,n){var t,o=e.overflow,d=e.overflowX,u=e.className,h=l(e,a);return i.createElement(r.m$.div,s({ref:n,className:(0,c.cx)("chakra-table__container",u)},h,{__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:null!=(t=null!=o?o:d)?t:"auto",overflowY:"hidden",maxWidth:"100%"}}))})),x=(0,r.Gp)((function(e,n){var t=(0,r.jC)("Table",e),a=(0,r.Lr)(e),d=a.className,u=l(a,o);return i.createElement(b,{value:t},i.createElement(r.m$.table,s({role:"table",ref:n,__css:t.table,className:(0,c.cx)("chakra-table",d)},u)))}));c.Ts&&(x.displayName="Table");var _=(0,r.Gp)((function(e,n){var t=e.placement,c=void 0===t?"bottom":t,a=l(e,d),o=m();return i.createElement(r.m$.caption,s({},a,{ref:n,__css:s({},o.caption,{captionSide:c})}))}));c.Ts&&(_.displayName="TableCaption");var p=(0,r.Gp)((function(e,n){var t=m();return i.createElement(r.m$.thead,s({},e,{ref:n,__css:t.thead}))})),v=(0,r.Gp)((function(e,n){var t=m();return i.createElement(r.m$.tbody,s({},e,{ref:n,__css:t.tbody}))})),g=(0,r.Gp)((function(e,n){var t=e.isNumeric,c=l(e,u),a=m();return i.createElement(r.m$.th,s({},c,{ref:n,__css:a.th,"data-is-numeric":t}))})),w=(0,r.Gp)((function(e,n){var t=m();return i.createElement(r.m$.tr,s({role:"row"},e,{ref:n,__css:t.tr}))})),T=(0,r.Gp)((function(e,n){var t=e.isNumeric,c=l(e,h),a=m();return i.createElement(r.m$.td,s({role:"gridcell"},c,{ref:n,__css:a.td,"data-is-numeric":t}))}))},2181:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/subject",function(){return t(4363)}])},7087:function(e,n,t){"use strict";var r=t(5893),c=(t(7294),t(4641)),i=t.n(c),s=t(1220);n.Z=function(e){var n="LOW"===e.severity?i().badge_low:"MEDIUM"===e.severity?i().badge_medium:"HIGH"===e.severity?i().badge_high:"CRITICAL"===e.severity&&i().badge_critical;return(0,r.jsx)("span",{className:"".concat(i().badge," ").concat(n," ").concat(e.checked&&i().checked),children:"".concat(s.Y.find((function(n){return n.label===e.severity})).label)})}},1220:function(e,n,t){"use strict";t.d(n,{Y:function(){return r}});var r=[{level:1,label:"LOW",handle_in:10},{level:2,label:"MEDIUM",handle_in:5},{level:3,label:"HIGH",handle_in:3},{level:4,label:"CRITICAL",handle_in:1}]},4363:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return S},default:function(){return k}});var r=t(7568),c=t(4051),i=t.n(c),s=t(5893),l=t(7294),a=t(9669),o=t.n(a),d=t(9008),u=t.n(d),h=t(5074),f=t(6658),b=t(5193),m=function(e){var n=e.show,t=e.onClose,r=e.onConfirm,c=(e.title,e.description,e.primaryAction,e.secondaryAction,e.cancelRef);return(0,s.jsx)(f.aR,{isOpen:n,cancelRef:c,onClose:t,children:(0,s.jsx)(f.dh,{children:(0,s.jsxs)(f._T,{children:[(0,s.jsx)(f.fY,{fontSize:"lg",fontWeight:"bold",children:"Delete Subject"}),(0,s.jsx)(f.iP,{children:"Are you sure want to delete this subject? This action can't be undone"}),(0,s.jsxs)(f.xo,{children:[(0,s.jsx)(b.zx,{ref:c,onClick:t,children:"Cancel"}),(0,s.jsx)(b.zx,{colorScheme:"red",onClick:r,ml:3,children:"Delete"})]})]})})})},j=t(6662),x=t(1664),_=t.n(x),p=t(7516),v=t(9583),g=t(6893),w=t(1163),T=t(9042),N=t(8790),y=t(7087),C=function(e){var n=undefined,t=(0,w.useRouter)(),r=function(e){t.push("/subject/edit/".concat(e))},c=(0,s.jsx)(T.xJ,{shadow:"lg",className:"border border-slate-500/20 rounded-xl w-full",children:(0,s.jsxs)(T.iA,{variant:"simple",bg:"whiteAlpha.900",backdropFilter:"auto",backdropBlur:"md",size:"sm",children:[(0,s.jsx)(T.hr,{className:"bg-slate-500/20",children:(0,s.jsxs)(T.Tr,{children:[(0,s.jsx)(T.Th,{width:"2",children:"No."}),(0,s.jsx)(T.Th,{children:"Case Subject Description"}),(0,s.jsx)(T.Th,{children:"Product"}),(0,s.jsx)(T.Th,{children:"Subproduct"}),(0,s.jsx)(T.Th,{width:"4",children:"Severity"}),(0,s.jsx)(T.Th,{width:"16",children:"Actions"})]})}),(0,s.jsxs)(T.p3,{children:[e.subjects.map((function(t,c){return(0,s.jsxs)(T.Tr,{children:[(0,s.jsx)(T.Td,{className:"uppercase",children:c+1}),(0,s.jsx)(T.Td,{children:t.subject}),(0,s.jsx)(T.Td,{children:t.Subproduct.Product.product_name}),(0,s.jsx)(T.Td,{children:t.Subproduct.subproduct_name}),(0,s.jsx)(T.Td,{children:(0,s.jsx)(y.Z,{severity:t.severity})}),(0,s.jsx)(T.Td,{children:(0,s.jsxs)(N.Ug,{children:[(0,s.jsx)(b.zx,{leftIcon:(0,s.jsx)(p.n2B,{}),onClick:r.bind(n,t.id),colorScheme:"teal",size:"sm",children:"Edit"}),(0,s.jsx)(b.zx,{leftIcon:(0,s.jsx)(v.lp8,{}),onClick:e.onDelete.bind(n,t.id),colorScheme:"red",size:"sm",children:"Delete"})]})})]},c)})),(0,s.jsxs)(T.Tr,{children:[(0,s.jsx)(T.Td,{}),(0,s.jsx)(T.Td,{children:(0,s.jsx)(_(),{href:"/subject/new",children:(0,s.jsx)(b.zx,{leftIcon:(0,s.jsx)(g.OvN,{}),size:"sm",children:"Create New Subject Case"})})})]})]})]})});return c},S=!0,k=function(e){var n=(0,l.useState)(!1),t=n[0],c=n[1],a=(0,l.useState)(null),d=a[0],f=a[1],b=(0,l.useState)((null===e||void 0===e?void 0:e.subjects)||null),x=b[0],_=b[1],p=(0,h.pm)(),v=(0,l.useRef)(),g=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().delete("/api/subjects/".concat(d));case 2:n=e.sent,c(!1),200!==n.status?alert("Failed to delete subject"):(_(x.filter((function(e){return e.id!==d}))),p({title:"Subject deleted",description:"Subject has been deleted successfully",status:"success",duration:5e3,isClosable:!0})),f(null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u(),{children:(0,s.jsx)("title",{children:"All Subjects"})}),(0,s.jsxs)(j.Z,{children:[(0,s.jsx)(m,{show:t,onClose:function(){c(!1),f(null)},onConfirm:g,title:"Are you sure want to delete this subject case?",description:"This action cannot be undone.",primaryAction:"Delete",secondaryAction:"Cancel",cancelRef:v}),(0,s.jsxs)("div",{className:"container px-1 text-slate-800 relative",children:[(0,s.jsx)("div",{className:"flex flex-col md:flex-row justify-between mt-6 mb-4",children:(0,s.jsx)("h1",{className:"font-semibold text-2xl text-lime-500",children:"Case Subject"})}),(0,s.jsx)(C,{subjects:x,onDelete:function(e){c(!0),f(e)}})]})]})]})}},4641:function(e){e.exports={badge:"Badge_badge__gRwm0",badge_low:"Badge_badge_low__ZHIef",checked:"Badge_checked__yIQLV",badge_medium:"Badge_badge_medium__rNHa1",badge_high:"Badge_badge_high__FlPL4",badge_critical:"Badge_badge_critical__ZFOPm"}}},function(e){e.O(0,[228,445,617,556,885,874,781,518,658,662,774,888,179],(function(){return n=2181,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
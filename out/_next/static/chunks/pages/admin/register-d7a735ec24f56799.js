(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{1391:function(e,r,n){"use strict";n.d(r,{Ph:function(){return v}});var a=n(9762),t=n(2846),l=n(4244),o=n(5031),s=n(8554),i=n.n(s),c=n(7294);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(this,arguments)}function d(e,r){if(null==e)return{};var n,a,t={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],r.indexOf(n)>=0||(t[n]=e[n]);return t}var h=["children","placeholder","className"],m=["rootProps","placeholder","icon","color","height","h","minH","minHeight","iconColor","iconSize"],p=["children"],f=(0,t.Gp)((function(e,r){var n=e.children,a=e.placeholder,l=e.className,s=d(e,h);return c.createElement(t.m$.select,u({},s,{ref:r,className:(0,o.cx)("chakra-select",l)}),a&&c.createElement("option",{value:""},a),n)}));o.Ts&&(f.displayName="SelectField");var v=(0,t.Gp)((function(e,r){var n=(0,t.jC)("Select",e),s=(0,t.Lr)(e),h=s.rootProps,p=s.placeholder,v=s.icon,g=s.color,x=s.height,_=s.h,j=s.minH,w=s.minHeight,E=s.iconColor,C=s.iconSize,N=d(s,m),S=(0,o.Vl)(N,l.oE),y=S[0],k=S[1],B=(0,a.Yp)(k),Z={width:"100%",height:"fit-content",position:"relative",color:g},q=i()({paddingEnd:"2rem"},n.field,{_focus:{zIndex:"unset"}});return c.createElement(t.m$.div,u({className:"chakra-select__wrapper",__css:Z},y,h),c.createElement(f,u({ref:r,height:null!=_?_:x,minH:null!=j?j:w,placeholder:p},B,{__css:q}),e.children),c.createElement(b,u({"data-disabled":(0,o.PB)(B.disabled)},(E||g)&&{color:E||g},{__css:n.icon},C&&{fontSize:C}),v))}));o.Ts&&(v.displayName="Select");var g=function(e){return c.createElement("svg",u({viewBox:"0 0 24 24"},e),c.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))},x=(0,t.m$)("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),b=function(e){var r=e.children,n=void 0===r?c.createElement(g,null):r,a=d(e,p),t=c.cloneElement(n,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return c.createElement(x,u({},a,{className:"chakra-select__icon-wrapper"}),c.isValidElement(n)?t:null)};o.Ts&&(b.displayName="SelectIcon")},4327:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/register",function(){return n(4402)}])},366:function(e,r,n){"use strict";var a=n(5893),t=(n(7294),n(9762)),l=n(4612);r.Z=function(e){var r=e.label,n=e.name,o=e.type,s=e.id,i=e.value,c=e.onChange,u=e.onBlur,d=e.error,h=e.className,m=e.touched;return(0,a.jsxs)(t.NI,{className:h,isInvalid:d&&m,children:[(0,a.jsx)(t.lX,{htmlFor:s,fontWeight:"semibold",fontSize:"sm",mb:2,textTransform:"uppercase",textColor:"gray.600",children:r}),(0,a.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,a.jsx)(l.II,{type:o||"text",id:s,name:n,value:i,onChange:c,onBlur:u}),(0,a.jsx)(t.J1,{className:"text-red-500 text-sm ",children:d})]})]})}},4402:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return w}});var a=n(7568),t=n(4051),l=n.n(t),o=n(5893),s=n(7294),i=n(9008),c=n.n(i),u=n(9669),d=n.n(u),h=n(8790),m=n(2175),p=n(4231),f=n(9762),v=n(1391),g=n(5193),x=n(366),b=p.Ry().shape({name:p.Z_().required("Required"),username:p.Z_().required("Required").min(8,"Must be at least 8 characters"),password:p.Z_().required("Required").min(8,"Must be at least 8 characters"),email:p.Z_().email("Invalid email address").required("Required"),phone:p.Z_().matches(/^(^\+62|62|^08)(\d{3,4}-?){2}\d{3,4}$/g,"Invalid phone number").required("Required"),role:p.Z_().required("Required")}),_=function(e){var r,n=(0,m.TA)({initialValues:{name:"",username:"",password:"",email:"",phone:"",role:""},validationSchema:b,onSubmit:function(){var e=(0,a.Z)(l().mark((function e(r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setSubmitting(!0),e.prev=1,e.next=4,d().post("/api/users/register",r);case 4:e.sent,n.resetForm(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:n.setSubmitting(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r){return e.apply(this,arguments)}}()});return(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Register new user"}),(0,o.jsxs)("form",{className:"flex flex-col md:grid md:grid-cols-2 gap-4",onSubmit:n.handleSubmit,children:[(0,o.jsx)(x.Z,{label:"Enter Full Name",id:"name",name:"name",value:n.values.name,onChange:n.handleChange,onBlur:n.handleBlur,error:n.errors.name,touched:n.touched.name}),(0,o.jsx)(x.Z,{label:"Enter Username",id:"username",name:"username",value:n.values.username,onChange:n.handleChange,onBlur:n.handleBlur,error:n.errors.username,touched:n.touched.username}),(0,o.jsx)(x.Z,{label:"Enter Password",id:"password",name:"password",type:"password",value:n.values.password,onChange:n.handleChange,onBlur:n.handleBlur,error:n.errors.password,touched:n.touched.password}),(0,o.jsx)(x.Z,{label:"Enter Email",id:"email",name:"email",value:n.values.email,onChange:n.handleChange,onBlur:n.handleBlur,error:n.errors.email,touched:n.touched.email}),(0,o.jsx)(x.Z,{label:"Enter Phone Number",id:"phone",name:"phone",value:n.values.phone,onChange:n.handleChange,onBlur:n.handleBlur,error:n.errors.phone,touched:n.touched.phone}),(0,o.jsxs)(f.NI,{isInvalid:n.errors.role&&n.touched.role,children:[(0,o.jsx)(f.lX,{htmlFor:"role",fontWeight:"semibold",fontSize:"sm",mb:2,textTransform:"uppercase",textColor:"gray.600",children:"Pick Role"}),(0,o.jsx)(v.Ph,{id:"role",placeholder:"Pick role for user",onChange:n.handleChange,onBlur:n.handleBlur,value:n.values.role,name:"role",children:null===(r=e.roles)||void 0===r?void 0:r.map((function(e){return(0,o.jsx)("option",{value:e.role_id,children:e.role_name},e.role_id)}))}),(0,o.jsx)(f.J1,{children:n.errors.role})]}),(0,o.jsx)(g.zx,{type:"submit",px:5,py:2,rounded:"full",fontSize:"md",text:"sm",alignSelf:"center",letterSpacing:"wider",textTransform:"uppercase",colorScheme:"facebook",gridColumnEnd:"span 2",isLoading:n.isSubmitting,children:"REGISTER"})]})]})},j=n(6662),w=function(){var e=(0,s.useState)([]),r=e[0],n=e[1];return(0,s.useEffect)((function(){var e=function(){var e=(0,a.Z)(l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d().get("/api/roles");case 2:r=e.sent,n(r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c(),{children:(0,o.jsx)("title",{children:"Register New User"})}),(0,o.jsx)(j.Z,{children:(0,o.jsx)(h.kC,{className:"container",p:6,direction:"column",bg:"whiteAlpha.900",backdropFilter:"auto",backdropBlur:"md",mt:"2",rounded:"xl",shadow:"lg",children:(0,o.jsx)(_,{roles:r})})})]})}}},function(e){e.O(0,[228,445,617,556,885,781,518,69,231,662,774,888,179],(function(){return r=4327,e(e.s=r);var r}));var r=e.O();_N_E=r}]);
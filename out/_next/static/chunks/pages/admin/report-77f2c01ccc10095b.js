(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{1850:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/report",function(){return t(3480)}])},3480:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return D}});var o=t(5893),r=t(7294),i=t(9008),l=t.n(i),a=t(8790),s=t(9237),c=t(9669),u=t.n(c),d=t(286),h=t(381),p=t.n(h),x=(t(1541),t(2049),t(5193)),v=t(4924),m=t(6042),f=t(9396),j=t(4090),g=t(1391),_=function(e){var n,t,i,l,s=e.setFilters,c=(0,r.useState)(),d=c[0],h=c[1];(0,r.useEffect)((function(){u().get("/api/tickets/filters").then((function(e){return h(e.data)}))}),[]);var p=function(e){""!==e.target.value?s((function(n){return(0,f.Z)((0,m.Z)({},n),(0,v.Z)({},e.target.name,e.target.value))})):s((function(n){return delete n[e.target.name],n}))};return(0,o.jsx)(j.UQ,{allowToggle:!0,children:(0,o.jsxs)(j.Qd,{mb:2,children:[(0,o.jsxs)(j.KF,{children:["Choose Report Filter",(0,o.jsx)(j.XE,{})]}),(0,o.jsx)(j.Hk,{children:(0,o.jsxs)(a.kC,{flexDirection:"column",p:4,bgColor:"white",rounded:"lg",shadow:"lg",children:[(0,o.jsx)(a.xv,{fontWeight:"semibold",fontSize:"lg",mb:2,children:"Select filters"}),(0,o.jsx)("form",{children:(0,o.jsxs)(a.rj,{templateColumns:["","repeat(2, 1fr)"],gap:2,children:[(0,o.jsx)(g.Ph,{placeholder:"- Filter Product -",name:"product",onChange:p,children:null===d||void 0===d||null===(n=d.products)||void 0===n?void 0:n.map((function(e){return(0,o.jsx)("option",{value:e.option_value,children:e.option_name},e.option_value)}))}),(0,o.jsxs)(g.Ph,{placeholder:"- Filter Status -",name:"status",onChange:p,children:[(0,o.jsx)("option",{value:"OPEN",children:"Open"}),(0,o.jsx)("option",{value:"PROGRESS",children:"Progress"}),(0,o.jsx)("option",{value:"CLOSED",children:"Closed"})]}),(0,o.jsx)(g.Ph,{placeholder:"- Filter Case Subject -",name:"subject",onChange:p,children:null===d||void 0===d||null===(t=d.casesubjects)||void 0===t?void 0:t.map((function(e){return(0,o.jsx)("option",{value:e.option_value,children:e.option_name},e.option_value)}))}),(0,o.jsxs)(g.Ph,{placeholder:"- Filter SLA -",name:"sla",onChange:p,children:[(0,o.jsx)("option",{value:"OVERDUE",children:"Overdue"}),(0,o.jsx)("option",{value:"1",children:"Due In 1 Day"}),(0,o.jsx)("option",{value:"3",children:"Due In 3+ Days"}),(0,o.jsx)("option",{value:"5",children:"Due In 5+ Days"}),(0,o.jsx)("option",{value:"10",children:"Due In 10+ Days"})]}),(0,o.jsx)(g.Ph,{placeholder:"- Filter Departement From -",name:"deptfrom",onChange:p,children:null===d||void 0===d||null===(i=d.departments)||void 0===i?void 0:i.map((function(e){return(0,o.jsxs)("option",{value:e.option_value,children:["From ",e.option_value]},e.option_value)}))}),(0,o.jsx)(g.Ph,{placeholder:"- Filter Departement To -",name:"deptto",onChange:p,children:null===d||void 0===d||null===(l=d.departments)||void 0===l?void 0:l.map((function(e){return(0,o.jsxs)("option",{value:e.option_value,children:["To ",e.option_value]},e.option_value)}))})]})})]})})]})})},w=function(){var e=(0,r.useState)([{startDate:new Date,endDate:new Date,key:"selection"}]),n=e[0],t=e[1],i=(0,r.useState)({}),l=i[0],s=i[1];return(0,o.jsxs)(a.kC,{w:"fit-content",p:"4",bg:"white",rounded:"2xl",shadow:"lg",justifyContent:"center",flexDirection:"column",children:[(0,o.jsx)(a.xv,{mb:2,fontSize:"xl",fontWeight:"semibold",children:"Generate Report"}),(0,o.jsx)(a.xv,{alignSelf:"center",mb:2,children:"Pick start and end date for the report to be issued:"}),(0,o.jsx)(d.Dw,{onChange:function(e){return t([e.selection])},ranges:n,months:1,showSelectionPreview:!0,className:"border shadow-lg rounded-lg overflow-clip mb-4",weekStartsOn:1,rangeColors:["#319795"]}),(0,o.jsx)(_,{setFilters:s}),(0,o.jsx)(x.zx,{colorScheme:"teal",onClick:function(){var e=p()(n[0].startDate).toISOString(),t=p()(n[0].endDate).toISOString();window.open("".concat("http://localhost:5000","/api/tickets/report?start=").concat(e,"&end=").concat(t,"&filter=").concat(encodeURI(JSON.stringify(l))),"_blank")},children:"Generate Report"})]})},D=function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l(),{children:(0,o.jsx)("title",{children:"Generate TIMES Report"})}),(0,o.jsx)(s.Z,{children:(0,o.jsxs)(a.kC,{flexDir:"column",className:"container",p:2,alignItems:"center",children:[(0,o.jsx)(a.X6,{size:"md",marginTop:4,marginBottom:4,className:"text-lime-500",fontWeight:"semibold",children:"Issue A Report"}),(0,o.jsx)(w,{})]})})]})}}},function(e){e.O(0,[228,445,617,556,885,781,518,533,544,237,774,888,179],(function(){return n=1850,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
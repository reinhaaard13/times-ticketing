(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[303],{9042:function(e,n,t){"use strict";t.d(n,{Td:function(){return y},Th:function(){return w},Tr:function(){return g},hr:function(){return _},iA:function(){return x},p3:function(){return v},xJ:function(){return p}});var r=t(2846),c=t(5031),i=t(7294);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},s.apply(this,arguments)}function a(e,n){if(null==e)return{};var t,r,c={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(c[t]=e[t]);return c}var l=["overflow","overflowX","className"],u=["className"],o=["placement"],d=["isNumeric"],f=["isNumeric"],h=(0,r.eC)("Table"),b=h[0],m=h[1],p=(0,r.Gp)((function(e,n){var t,u=e.overflow,o=e.overflowX,d=e.className,f=a(e,l);return i.createElement(r.m$.div,s({ref:n,className:(0,c.cx)("chakra-table__container",d)},f,{__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:null!=(t=null!=u?u:o)?t:"auto",overflowY:"hidden",maxWidth:"100%"}}))})),x=(0,r.Gp)((function(e,n){var t=(0,r.jC)("Table",e),l=(0,r.Lr)(e),o=l.className,d=a(l,u);return i.createElement(b,{value:t},i.createElement(r.m$.table,s({role:"table",ref:n,__css:t.table,className:(0,c.cx)("chakra-table",o)},d)))}));c.Ts&&(x.displayName="Table");var j=(0,r.Gp)((function(e,n){var t=e.placement,c=void 0===t?"bottom":t,l=a(e,o),u=m();return i.createElement(r.m$.caption,s({},l,{ref:n,__css:s({},u.caption,{captionSide:c})}))}));c.Ts&&(j.displayName="TableCaption");var _=(0,r.Gp)((function(e,n){var t=m();return i.createElement(r.m$.thead,s({},e,{ref:n,__css:t.thead}))})),v=(0,r.Gp)((function(e,n){var t=m();return i.createElement(r.m$.tbody,s({},e,{ref:n,__css:t.tbody}))})),w=(0,r.Gp)((function(e,n){var t=e.isNumeric,c=a(e,d),l=m();return i.createElement(r.m$.th,s({},c,{ref:n,__css:l.th,"data-is-numeric":t}))})),g=(0,r.Gp)((function(e,n){var t=m();return i.createElement(r.m$.tr,s({role:"row"},e,{ref:n,__css:t.tr}))})),y=(0,r.Gp)((function(e,n){var t=e.isNumeric,c=a(e,f),l=m();return i.createElement(r.m$.td,s({role:"gridcell"},c,{ref:n,__css:l.td,"data-is-numeric":t}))}))},2181:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/subject",function(){return t(3941)}])},7087:function(e,n,t){"use strict";var r=t(5893),c=(t(7294),t(4641)),i=t.n(c),s=t(7361);n.Z=function(e){var n="LOW"===e.severity?i().badge_low:"MEDIUM"===e.severity?i().badge_medium:"HIGH"===e.severity?i().badge_high:"CRITICAL"===e.severity&&i().badge_critical;return(0,r.jsx)("span",{className:"".concat(i().badge," ").concat(n," ").concat(e.checked&&i().checked),children:"".concat(s.Y.find((function(n){return n.label===e.severity})).label)})}},7361:function(e,n,t){"use strict";t.d(n,{Y:function(){return r}});var r=[{level:1,label:"LOW",handle_in:10},{level:2,label:"MEDIUM",handle_in:5},{level:3,label:"HIGH",handle_in:3},{level:4,label:"CRITICAL",handle_in:1}]},3941:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var r=t(7568),c=t(4051),i=t.n(c),s=t(5893),a=t(7294),l=t(9669),u=t.n(l),o=t(9008),d=t.n(o),f=t(5074),h=t(6658),b=t(5193),m=function(e){var n=e.show,t=e.onClose,r=e.onConfirm,c=(e.title,e.description,e.primaryAction,e.secondaryAction,e.cancelRef);return(0,s.jsx)(h.aR,{isOpen:n,cancelRef:c,onClose:t,children:(0,s.jsx)(h.dh,{children:(0,s.jsxs)(h._T,{children:[(0,s.jsx)(h.fY,{fontSize:"lg",fontWeight:"bold",children:"Delete Subject"}),(0,s.jsx)(h.iP,{children:"Are you sure want to delete this subject? This action can't be undone"}),(0,s.jsxs)(h.xo,{children:[(0,s.jsx)(b.zx,{ref:c,onClick:t,children:"Cancel"}),(0,s.jsx)(b.zx,{colorScheme:"red",onClick:r,ml:3,children:"Delete"})]})]})})})},p=t(9237),x=t(1664),j=t.n(x),_=t(7516),v=t(9583),w=t(6893),g=t(1163),y=t(9042),T=t(8790),N=t(7087),C=t(1438),k=t(2951),S=new(function(){function e(){(0,C.Z)(this,e)}return(0,k.Z)(e,[{key:"getAllSubjects",value:function(){return(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("/api/subjects");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))()}}]),e}()),E=function(e){var n=undefined,t=(0,g.useRouter)(),c=(0,a.useState)([]),l=c[0],u=c[1];(0,a.useEffect)((function(){function e(){return e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAllSubjects();case 2:n=e.sent,u(n);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var o=function(e){t.push("/subject/edit/".concat(e))},d=(0,s.jsx)(y.xJ,{shadow:"lg",className:"border border-slate-500/20 rounded-xl w-full",children:(0,s.jsxs)(y.iA,{variant:"simple",bg:"whiteAlpha.900",backdropFilter:"auto",backdropBlur:"md",size:"sm",children:[(0,s.jsx)(y.hr,{className:"bg-slate-500/20",children:(0,s.jsxs)(y.Tr,{children:[(0,s.jsx)(y.Th,{width:"2",children:"No."}),(0,s.jsx)(y.Th,{children:"Case Subject Description"}),(0,s.jsx)(y.Th,{children:"Product"}),(0,s.jsx)(y.Th,{children:"Subproduct"}),(0,s.jsx)(y.Th,{width:"4",children:"Severity"}),(0,s.jsx)(y.Th,{width:"16",children:"Actions"})]})}),(0,s.jsxs)(y.p3,{children:[l.map((function(t,r){return(0,s.jsxs)(y.Tr,{children:[(0,s.jsx)(y.Td,{className:"uppercase",children:r+1}),(0,s.jsx)(y.Td,{children:t.subject}),(0,s.jsx)(y.Td,{children:t.Subproduct.Product.product_name}),(0,s.jsx)(y.Td,{children:t.Subproduct.subproduct_name}),(0,s.jsx)(y.Td,{children:(0,s.jsx)(N.Z,{severity:t.severity})}),(0,s.jsx)(y.Td,{children:(0,s.jsxs)(T.Ug,{children:[(0,s.jsx)(b.zx,{leftIcon:(0,s.jsx)(_.n2B,{}),onClick:o.bind(n,t.id),colorScheme:"teal",size:"sm",children:"Edit"}),(0,s.jsx)(b.zx,{leftIcon:(0,s.jsx)(v.lp8,{}),onClick:e.onDelete.bind(n,t.id),colorScheme:"red",size:"sm",children:"Delete"})]})})]},r)})),(0,s.jsxs)(y.Tr,{children:[(0,s.jsx)(y.Td,{}),(0,s.jsx)(y.Td,{children:(0,s.jsx)(j(),{href:"/subject/new",children:(0,s.jsx)(b.zx,{leftIcon:(0,s.jsx)(w.OvN,{}),size:"sm",children:"Create New Subject Case"})})})]})]})]})});return d},A=function(e){var n=(0,a.useState)(!1),t=n[0],c=n[1],l=(0,a.useState)(null),o=l[0],h=l[1],b=(0,a.useState)((null===e||void 0===e?void 0:e.subjects)||null),x=b[0],j=b[1],_=(0,f.pm)(),v=(0,a.useRef)(),w=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().delete("/api/subjects/".concat(o));case 2:n=e.sent,c(!1),200!==n.status?alert("Failed to delete subject"):(j(x.filter((function(e){return e.id!==o}))),_({title:"Subject deleted",description:"Subject has been deleted successfully",status:"success",duration:5e3,isClosable:!0})),h(null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d(),{children:(0,s.jsx)("title",{children:"All Subjects"})}),(0,s.jsxs)(p.Z,{children:[(0,s.jsx)(m,{show:t,onClose:function(){c(!1),h(null)},onConfirm:w,title:"Are you sure want to delete this subject case?",description:"This action cannot be undone.",primaryAction:"Delete",secondaryAction:"Cancel",cancelRef:v}),(0,s.jsxs)("div",{className:"container px-1 text-slate-800 relative",children:[(0,s.jsx)("div",{className:"flex flex-col md:flex-row justify-between mt-6 mb-4",children:(0,s.jsx)("h1",{className:"font-semibold text-2xl text-lime-500",children:"Case Subject"})}),(0,s.jsx)(E,{onDelete:function(e){c(!0),h(e)}})]})]})]})}},4641:function(e){e.exports={badge:"Badge_badge__gRwm0",badge_low:"Badge_badge_low__ZHIef",checked:"Badge_checked__yIQLV",badge_medium:"Badge_badge_medium__rNHa1",badge_high:"Badge_badge_high__FlPL4",badge_critical:"Badge_badge_critical__ZFOPm"}},1438:function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,{Z:function(){return r}})},2951:function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}t.d(n,{Z:function(){return c}})}},function(e){e.O(0,[228,445,617,556,885,874,781,518,658,237,774,888,179],(function(){return n=2181,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
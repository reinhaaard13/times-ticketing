(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48],{4683:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/subject/edit/[csid]",function(){return s(3879)}])},7087:function(e,t,s){"use strict";var n=s(5893),r=(s(7294),s(4641)),a=s.n(r),c=s(7361);t.Z=function(e){var t="LOW"===e.severity?a().badge_low:"MEDIUM"===e.severity?a().badge_medium:"HIGH"===e.severity?a().badge_high:"CRITICAL"===e.severity&&a().badge_critical;return(0,n.jsx)("span",{className:"".concat(a().badge," ").concat(t," ").concat(e.checked&&a().checked),children:"".concat(c.Y.find((function(t){return t.label===e.severity})).label)})}},366:function(e,t,s){"use strict";var n=s(5893),r=(s(7294),s(9762)),a=s(4612);t.Z=function(e){var t=e.label,s=e.name,c=e.type,i=e.id,l=e.value,u=e.onChange,d=e.onBlur,o=e.error,b=e.className,h=e.touched;return(0,n.jsxs)(r.NI,{className:b,isInvalid:o&&h,children:[(0,n.jsx)(r.lX,{htmlFor:i,fontWeight:"semibold",fontSize:"sm",mb:2,textTransform:"uppercase",textColor:"gray.600",children:t}),(0,n.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,n.jsx)(a.II,{type:c||"text",id:i,name:s,value:l,onChange:u,onBlur:d}),(0,n.jsx)(r.J1,{className:"text-red-500 text-sm ",children:o})]})]})}},1592:function(e,t,s){"use strict";s.d(t,{Z:function(){return y}});var n=s(7568),r=s(6042),a=s(9396),c=s(4051),i=s.n(c),l=s(5893),u=s(7294),d=s(2175),o=s(9669),b=s.n(o),h=s(1163),p=s(8790),x=s(1391),m=s(366),f=s(5039),v=s(7087),j=s(7361);function g(e){return(0,l.jsxs)(f.E,{value:e.selected,onChange:e.onChange,children:[(0,l.jsx)(f.E.Label,{className:"sr-only",children:"Severity Select"}),(0,l.jsx)("div",{className:"space-y-2",children:j.Y.map((function(e){return(0,l.jsx)(f.E.Option,{value:e.label,className:function(e){var t=e.active,s=e.checked;return"".concat(t?"ring-2 ring-white ring-opacity-60 ring-offset-2 ring-offset-sky-300":"","\n                  ").concat(s?"bg-sky-900 bg-opacity-75 text-white":"bg-white","\n                    relative flex cursor-pointer rounded-lg px-5 py-4 shadow-md focus:outline-none")},children:function(t){t.active;var s=t.checked;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("div",{className:"text-sm select-none",children:[(0,l.jsx)(f.E.Label,{as:"p",className:"font-medium uppercase ".concat(s?"text-white":"text-gray-900"),children:(0,l.jsx)(v.Z,(0,a.Z)((0,r.Z)({severity:e.label},s&&{checked:!0}),{children:e.label}))}),(0,l.jsx)(f.E.Description,{as:"span",className:"inline ".concat(s?"text-sky-100":"text-gray-500"),children:(0,l.jsxs)("span",{children:["Handled in ",e.handle_in," days."]})})]})}),s&&(0,l.jsx)("div",{className:"shrink-0 text-white",children:(0,l.jsx)(_,{className:"h-6 w-6"})})]})})}},e.level)}))})]})}function _(e){return(0,l.jsxs)("svg",(0,a.Z)((0,r.Z)({viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,l.jsx)("circle",{cx:12,cy:12,r:12,fill:"#fff",opacity:"0.2"}),(0,l.jsx)("path",{d:"M7 13l3 3 7-7",stroke:"#fff",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})]}))}var y=function(e){var t=(0,h.useRouter)(),s=(0,u.useState)({}),c=s[0],o=s[1],f=(0,u.useState)([]),v=f[0],j=f[1],_=t.query.csid,y=(0,d.TA)({initialValues:{subject:(null===c||void 0===c?void 0:c.subject)||"",severity:(null===c||void 0===c?void 0:c.severity)||null,subproduct:(null===c||void 0===c?void 0:c.subproduct_id)||null},validate:function(e){var t={};return e.subproduct||(t.subproduct="Required"),e.subject||(t.subject="Required"),null===e.severity&&(t.severity="Must pick 1 severity"),t},onSubmit:function(){var e=(0,n.Z)(i().mark((function e(s){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.setSubmitting(!0),!c){e.next=8;break}return e.next=5,b().patch("/api/subjects/".concat(c.id),{subproduct_id:s.subproduct,subject:s.subject,severity:s.severity});case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,b().post("/api/subjects/create",{subproduct_id:s.subproduct,subject:s.subject,severity:s.severity});case 10:n=e.sent;case 11:200===n.status&&t.push("/subject"),y.setSubmitting(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});(0,u.useEffect)((function(){var e=function(){var e=(0,n.Z)(i().mark((function e(){var t,s,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b().get("".concat("http://localhost:5000","/api/subjects/").concat(_));case 2:return t=e.sent,e.next=5,t.data;case 5:return s=e.sent,e.next=8,b().get("".concat("http://localhost:5000","/api/subproducts"));case 8:return n=e.sent,e.next=11,n.data;case 11:r=e.sent,o(s),y.setFieldValue("subject",s.subject),y.setFieldValue("severity",s.severity),y.setFieldValue("subproduct",s.subproduct_id),j(r);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[_,y]);return(0,l.jsx)(p.xu,{w:"full",maxW:"lg",p:4,rounded:"xl",shadow:"lg",bg:"whiteAlpha.900",backdropFilter:"auto",backdropBlur:"md",children:(0,l.jsxs)("form",{onSubmit:y.handleSubmit,className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"subproduct",className:"uppercase font-semibold text-slate-600 mb-2 text-sm",children:"Select Subproduct"}),(0,l.jsx)(x.Ph,{placeholder:"Subproduct of New Case Subject",name:"subproduct",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.subproduct,mb:3,id:"subproduct",children:v.map((function(e){return(0,l.jsxs)("option",{value:e.subproduct_id,children:[e.subproduct_name," - ",e.Product.product_name]},e.subproduct_id)}))}),(0,l.jsx)(m.Z,{label:"Subject Description",id:"desc",name:"subject",value:y.values.subject,onChange:y.handleChange,onBlur:y.handleBlur,error:y.errors.subject}),(0,l.jsx)("label",{htmlFor:"",className:"uppercase font-semibold text-slate-600 mb-2 text-sm",children:"Select Severity"}),(0,l.jsx)(g,{selected:y.values.severity,onChange:function(e){y.setValues((function(t){return(0,a.Z)((0,r.Z)({},t),{severity:e})}))}}),(0,l.jsx)("button",{type:"submit",disabled:!y.isValid||y.isSubmitting,className:"px-4 py-2 font-semibold text-sm uppercase mt-4 hover:shadow-md hover:bg-lime-600 outline-lime-600 text-white w-fit self-center bg-lime-500 rounded-full disabled:bg-opacity-25 transition-all duration-300",children:c?"Apply Changes":"Create New Subject Case"})]})})}},7361:function(e,t,s){"use strict";s.d(t,{Y:function(){return n}});var n=[{level:1,label:"LOW",handle_in:10},{level:2,label:"MEDIUM",handle_in:5},{level:3,label:"HIGH",handle_in:3},{level:4,label:"CRITICAL",handle_in:1}]},3879:function(e,t,s){"use strict";s.r(t);var n=s(5893),r=(s(7294),s(9008)),a=s.n(r),c=s(9237),i=s(1592);s(9669);t.default=function(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a(),{children:(0,n.jsx)("title",{children:"Edit Subject"})}),(0,n.jsx)(c.Z,{children:(0,n.jsxs)("div",{className:"container px-4 flex flex-col justify-center items-center",children:[(0,n.jsx)("p",{className:"font-semibold mt-8 mb-4 text-xl text-lime-500",children:"Edit Existing Subject Case"}),(0,n.jsx)(i.Z,{existingData:e.caseSubject,subproducts:e.subproducts})]})})]})}},4641:function(e){e.exports={badge:"Badge_badge__gRwm0",badge_low:"Badge_badge_low__ZHIef",checked:"Badge_checked__yIQLV",badge_medium:"Badge_badge_medium__rNHa1",badge_high:"Badge_badge_high__FlPL4",badge_critical:"Badge_badge_critical__ZFOPm"}}},function(e){e.O(0,[228,445,617,556,885,781,518,69,146,237,774,888,179],(function(){return t=4683,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
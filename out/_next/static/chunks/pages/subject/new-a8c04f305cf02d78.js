(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{8990:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/subject/new",function(){return n(2830)}])},7087:function(e,t,n){"use strict";var s=n(5893),r=(n(7294),n(4641)),a=n.n(r),c=n(7361);t.Z=function(e){var t="LOW"===e.severity?a().badge_low:"MEDIUM"===e.severity?a().badge_medium:"HIGH"===e.severity?a().badge_high:"CRITICAL"===e.severity&&a().badge_critical;return(0,s.jsx)("span",{className:"".concat(a().badge," ").concat(t," ").concat(e.checked&&a().checked),children:"".concat(c.Y.find((function(t){return t.label===e.severity})).label)})}},366:function(e,t,n){"use strict";var s=n(5893),r=(n(7294),n(9762)),a=n(4612);t.Z=function(e){var t=e.label,n=e.name,c=e.type,i=e.id,l=e.value,u=e.onChange,d=e.onBlur,o=e.error,b=e.className,h=e.touched;return(0,s.jsxs)(r.NI,{className:b,isInvalid:o&&h,children:[(0,s.jsx)(r.lX,{htmlFor:i,fontWeight:"semibold",fontSize:"sm",mb:2,textTransform:"uppercase",textColor:"gray.600",children:t}),(0,s.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,s.jsx)(a.II,{type:c||"text",id:i,name:n,value:l,onChange:u,onBlur:d}),(0,s.jsx)(r.J1,{className:"text-red-500 text-sm ",children:o})]})]})}},1592:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var s=n(7568),r=n(6042),a=n(9396),c=n(4051),i=n.n(c),l=n(5893),u=n(7294),d=n(2175),o=n(9669),b=n.n(o),h=n(1163),p=n(8790),x=n(1391),f=n(366),m=n(5039),v=n(7087),j=n(7361);function g(e){return(0,l.jsxs)(m.E,{value:e.selected,onChange:e.onChange,children:[(0,l.jsx)(m.E.Label,{className:"sr-only",children:"Severity Select"}),(0,l.jsx)("div",{className:"space-y-2",children:j.Y.map((function(e){return(0,l.jsx)(m.E.Option,{value:e.label,className:function(e){var t=e.active,n=e.checked;return"".concat(t?"ring-2 ring-white ring-opacity-60 ring-offset-2 ring-offset-sky-300":"","\n                  ").concat(n?"bg-sky-900 bg-opacity-75 text-white":"bg-white","\n                    relative flex cursor-pointer rounded-lg px-5 py-4 shadow-md focus:outline-none")},children:function(t){t.active;var n=t.checked;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("div",{className:"text-sm select-none",children:[(0,l.jsx)(m.E.Label,{as:"p",className:"font-medium uppercase ".concat(n?"text-white":"text-gray-900"),children:(0,l.jsx)(v.Z,(0,a.Z)((0,r.Z)({severity:e.label},n&&{checked:!0}),{children:e.label}))}),(0,l.jsx)(m.E.Description,{as:"span",className:"inline ".concat(n?"text-sky-100":"text-gray-500"),children:(0,l.jsxs)("span",{children:["Handled in ",e.handle_in," days."]})})]})}),n&&(0,l.jsx)("div",{className:"shrink-0 text-white",children:(0,l.jsx)(_,{className:"h-6 w-6"})})]})})}},e.level)}))})]})}function _(e){return(0,l.jsxs)("svg",(0,a.Z)((0,r.Z)({viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,l.jsx)("circle",{cx:12,cy:12,r:12,fill:"#fff",opacity:"0.2"}),(0,l.jsx)("path",{d:"M7 13l3 3 7-7",stroke:"#fff",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})]}))}var y=function(e){var t=(0,h.useRouter)(),n=(0,u.useState)({}),c=n[0],o=n[1],m=(0,u.useState)([]),v=m[0],j=m[1],_=t.query.csid,y=(0,d.TA)({initialValues:{subject:(null===c||void 0===c?void 0:c.subject)||"",severity:(null===c||void 0===c?void 0:c.severity)||null,subproduct:(null===c||void 0===c?void 0:c.subproduct_id)||null},validate:function(e){var t={};return e.subproduct||(t.subproduct="Required"),e.subject||(t.subject="Required"),null===e.severity&&(t.severity="Must pick 1 severity"),t},onSubmit:function(){var e=(0,s.Z)(i().mark((function e(n){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.setSubmitting(!0),!c.id){e.next=8;break}return e.next=5,b().patch("/api/subjects/".concat(c.id),{subproduct_id:n.subproduct,subject:n.subject,severity:n.severity});case 5:s=e.sent,e.next=11;break;case 8:return e.next=10,b().post("/api/subjects/create",{subproduct_id:n.subproduct,subject:n.subject,severity:n.severity});case 10:s=e.sent;case 11:200===s.status&&t.push("/subject"),y.setSubmitting(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});(0,u.useEffect)((function(){var e=function(){var e=(0,s.Z)(i().mark((function e(){var t,n,s,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=11;break}return e.next=3,b().get("".concat("http://10.20.21.165","/api/subjects/").concat(_));case 3:return t=e.sent,e.next=6,t.data;case 6:n=e.sent,o(n),y.setFieldValue("subject",n.subject),y.setFieldValue("severity",n.severity),y.setFieldValue("subproduct",n.subproduct_id);case 11:return e.next=13,b().get("".concat("http://10.20.21.165","/api/subproducts"));case 13:return s=e.sent,e.next=16,s.data;case 16:r=e.sent,j(r);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);return(0,l.jsx)(p.xu,{w:"full",maxW:"lg",p:4,rounded:"xl",shadow:"lg",bg:"whiteAlpha.900",backdropFilter:"auto",backdropBlur:"md",children:(0,l.jsxs)("form",{onSubmit:y.handleSubmit,className:"flex flex-col",children:[(0,l.jsx)("label",{htmlFor:"subproduct",className:"uppercase font-semibold text-slate-600 mb-2 text-sm",children:"Select Subproduct"}),(0,l.jsx)(x.Ph,{placeholder:"Subproduct of New Case Subject",name:"subproduct",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.subproduct,mb:3,id:"subproduct",children:v.map((function(e){return(0,l.jsxs)("option",{value:e.subproduct_id,children:[e.subproduct_name," - ",e.Product.product_name]},e.subproduct_id)}))}),(0,l.jsx)(f.Z,{label:"Subject Description",id:"desc",name:"subject",value:y.values.subject,onChange:y.handleChange,onBlur:y.handleBlur,error:y.errors.subject}),(0,l.jsx)("label",{htmlFor:"",className:"uppercase font-semibold text-slate-600 mb-2 text-sm",children:"Select Severity"}),(0,l.jsx)(g,{selected:y.values.severity,onChange:function(e){y.setValues((function(t){return(0,a.Z)((0,r.Z)({},t),{severity:e})}))}}),(0,l.jsx)("button",{type:"submit",disabled:!y.isValid||y.isSubmitting,className:"px-4 py-2 font-semibold text-sm uppercase mt-4 hover:shadow-md hover:bg-lime-600 outline-lime-600 text-white w-fit self-center bg-lime-500 rounded-full disabled:bg-opacity-25 transition-all duration-300",children:c?"Apply Changes":"Create New Subject Case"})]})})}},7361:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var s=[{level:1,label:"LOW",handle_in:10},{level:2,label:"MEDIUM",handle_in:5},{level:3,label:"HIGH",handle_in:3},{level:4,label:"CRITICAL",handle_in:1}]},2830:function(e,t,n){"use strict";n.r(t);var s=n(5893),r=(n(7294),n(9008)),a=n.n(r),c=(n(9669),n(9237)),i=n(1592);t.default=function(e){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a(),{children:(0,s.jsx)("title",{children:"Create New Subject"})}),(0,s.jsx)(c.Z,{children:(0,s.jsxs)("div",{className:"container px-4 flex flex-col justify-center items-center",children:[(0,s.jsx)("p",{className:"font-semibold mt-8 mb-4 text-xl text-lime-500",children:"Create A New Subject Case"}),(0,s.jsx)(i.Z,{subproducts:e.subproducts})]})})]})}},4641:function(e){e.exports={badge:"Badge_badge__gRwm0",badge_low:"Badge_badge_low__ZHIef",checked:"Badge_checked__yIQLV",badge_medium:"Badge_badge_medium__rNHa1",badge_high:"Badge_badge_high__FlPL4",badge_critical:"Badge_badge_critical__ZFOPm"}}},function(e){e.O(0,[228,445,617,556,885,781,518,69,146,237,774,888,179],(function(){return t=8990,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
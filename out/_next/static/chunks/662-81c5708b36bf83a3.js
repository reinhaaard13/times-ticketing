(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{6662:function(e,n,s){"use strict";s.d(n,{Z:function(){return Y}});var t=s(5893),i=s(7294),r=s(8193),l=s(9583),a=s(5434),c=s(6893),o=s(3854),d=s(5675),x=s.n(d),h=s(1664),u=s.n(h),j=s(1163),p=s(1895),f=s(7398),g=s(8790),m=s(4151),b=s(5684),v=s(5),A=s.n(v),k=function(){return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1366 401",children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"linear-gradient",x1:"74.18",y1:"-159.13",x2:"1247.61",y2:"518.34",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{offset:"0",stopColor:"#202e3b"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#515463"})]})}),(0,t.jsx)("g",{id:"Layer_2","data-name":"Layer 2",children:(0,t.jsx)("g",{id:"Layer_1-2","data-name":"Layer 1",children:(0,t.jsx)("path",{className:"cls-1",style:{fill:"url(#linear-gradient)"},d:"M0,0H1366V274.46s-160,37.21-437,44.65-315-34.42-581-36.28S0,307,0,307Z"})})})]})},C=s(7568),w=s(828),y=s(4051),N=s.n(y),_=s(8100),E=s(9669),R=s.n(E),T=s(7375),D=s(2684),S=s(6871),I=s(7496),H=s(9609),U=s(5193),Z=function(e){var n=e.count,s=e.onClick;return(0,t.jsx)(U.hU,{backgroundColor:"blackAlpha.100",_hover:{backgroundColor:"blackAlpha.300"},_active:{backgroundColor:"blackAlpha.400"},mr:2,size:"lg",fontSize:"xl",onClick:s,icon:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.YaO,{}),!!n&&(0,t.jsx)(g.xu,{as:"span",bgColor:"red",p:1,position:"absolute",top:1,right:"5px",fontSize:"xx-small",rounded:"full",children:n})]})})},L=s(2740),z=function(){var e=(0,j.useRouter)(),n=(0,p.a)().token,s=(0,T.qY)(),i=s.isOpen,r=(s.onOpen,s.onClose),l=s.onToggle,a=(0,w.Z)((0,D.ac)("(max-width: 768px)"),1)[0],c=(0,_.ZP)("/api/users/notification",function(){var e=(0,C.Z)(N().mark((function e(s){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R().get(s,{headers:{Authorization:"Bearer ".concat(n)}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).data;return a?(0,t.jsx)(Z,{count:null===c||void 0===c?void 0:c.filter((function(e){return"UNREAD"===e.status})).length,onClick:function(){return e.push("/notification")}}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z,{count:null===c||void 0===c?void 0:c.filter((function(e){return"UNREAD"===e.status})).length,onClick:l}),(0,t.jsxs)(S.h_,{children:[i&&(0,t.jsx)(g.xu,{w:"full",h:"full",position:"fixed",top:0,left:0,onClick:r}),(0,t.jsx)(I.pT,{in:i,unmountOnExit:!0,children:(0,t.jsxs)(g.kC,{flexDir:"column",position:"absolute",top:20,right:10,textColor:"black",bg:"whiteAlpha.800",backdropFilter:"auto",backdropBlur:"lg",width:500,shadow:"lg",rounded:"lg",overflowY:"auto",maxHeight:"500px",className:"scrollbar",children:[(0,t.jsx)(g.xv,{marginX:4,my:3,fontWeight:"semibold",fontSize:"lg",children:"Notification"}),(0,t.jsx)(g.iz,{}),c?(0,t.jsxs)(t.Fragment,{children:[c.filter((function(e){return"UNREAD"===e.status})).length>0&&(0,t.jsx)(g.xv,{margin:4,my:2,fontWeight:"semibold",className:"text-lime-600",children:"Unread"}),c.filter((function(e){return"UNREAD"===e.status})).map((function(e,n){return(0,t.jsx)(L.Z,{notification:e,onClick:r},n)})),c.filter((function(e){return"READ"===e.status})).length>0&&(0,t.jsx)(g.xv,{margin:4,my:2,fontWeight:"semibold",className:"text-lime-600",children:"Earlier"}),c.filter((function(e){return"READ"===e.status})).map((function(e,n){return(0,t.jsx)(L.Z,{notification:e,onClick:r},n)}))]}):(0,t.jsxs)(g.kC,{alignItems:"center",justifyContent:"center",padding:4,gap:4,children:[(0,t.jsx)(H.$,{}),(0,t.jsx)(g.xv,{children:"Loading..."})]}),0===(null===c||void 0===c?void 0:c.length)&&(0,t.jsx)(g.xv,{padding:4,color:"gray.600",children:"You have no notification"})]})})]})]})},Q=function(){var e=(0,p.a)(),n=e.user,s=e.logout,i=(0,j.useRouter)();return(0,t.jsxs)("div",{className:"".concat(A().header," relative"),children:[(0,t.jsxs)("div",{className:"container p-2 z-10 flex items-center justify-between",children:[(0,t.jsxs)("h1",{className:"font-bold text-xl logo",children:["TIMES ",(0,t.jsx)("span",{className:"font-normal",children:"Ticketing"})]}),(0,t.jsxs)(g.kC,{alignItems:"center",children:[(0,t.jsx)(z,{}),(0,t.jsxs)(m.v2,{children:[(0,t.jsx)(m.j2,{as:"div",className:"cursor-pointer",children:(0,t.jsxs)("div",{className:A().profile,children:[(0,t.jsx)("p",{children:null===n||void 0===n?void 0:n.name}),(0,t.jsx)(b.qE,{name:null===n||void 0===n?void 0:n.name})]})}),(0,t.jsx)(m.qy,{textColor:"gray.800",children:(0,t.jsx)(m.sN,{color:"red.500",onClick:function(){i.replace("/auth"),s()},children:"Logout"})})]})]})]}),(0,t.jsx)("div",{className:"w-full h-60 self-start z-0 absolute",children:(0,t.jsx)(k,{})})]})},F={src:"/_next/static/media/logo.5e3442f0.png",height:289,width:310,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAArklEQVR42mP4//8/AxAr/Pv3z/Pzt48iQDYTEDOAcMwyIUYw4/ef3wJA+gwQZ9x+fl1AeAaDaNF6Xy6QHMPff391gIxpP359n1q/JTHSYR6DWcIKhdqYZfwaYAVAoxWBeC2Q08fQw+CZuELtfswywSMgydjlwmArwBioSAhiL38mUGIS0H5umAkgRzEjHCZcBJR8DMRXgFgBbsKnbx8ZoS5fELNceCqQto9ZJsQHAIgviQmOwgQrAAAAAElFTkSuQmCC"},O=s(2884),W=s.n(O),Y=function(e){var n=(0,j.useRouter)(),s=(0,p.a)(),d=s.role,h=s.privileges,g=s.logout,m=n.pathname;return(0,t.jsxs)("div",{className:"flex w-full",children:[(0,t.jsx)("aside",{className:W().sidebar,children:(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)(u(),{href:"/",children:(0,t.jsx)("a",{children:(0,t.jsx)("div",{className:"relative w-full h-full",children:(0,t.jsx)(x(),{alt:"times-logo",src:F,layout:"fill",objectFit:"contain"})})})})}),(0,t.jsx)("li",{children:(0,t.jsx)(u(),{href:"/",children:(0,t.jsx)("a",{className:"".concat("/"===m&&"bg-slate-500"),children:(0,t.jsx)(f.u,{label:"Home",placement:"right",children:(0,t.jsx)("span",{children:(0,t.jsx)(r.V9Z,{})})})})})}),h.includes("TICKET_CREATE")&&(0,t.jsx)("li",{children:(0,t.jsx)(u(),{href:"/ticket/new",children:(0,t.jsx)("a",{className:"".concat("/ticket/new"===m&&"bg-slate-500"),children:(0,t.jsx)(f.u,{label:"Add Ticket",placement:"right",children:(0,t.jsx)("span",{children:(0,t.jsx)(l.KHI,{})})})})})}),"Administrator"===d&&(0,t.jsxs)(i.Fragment,{children:[(0,t.jsx)("li",{children:(0,t.jsx)(u(),{href:"/subject",children:(0,t.jsx)("a",{className:"".concat("/subject"===m&&"bg-slate-500"),children:(0,t.jsx)(f.u,{label:"Subject Cases",placement:"right",children:(0,t.jsx)("span",{children:(0,t.jsx)(a.sZk,{})})})})})}),(0,t.jsx)("li",{children:(0,t.jsx)(u(),{href:"/product",passHref:!0,children:(0,t.jsx)("a",{className:"".concat("/product"===m&&"bg-slate-500"),children:(0,t.jsx)(f.u,{label:"Products",placement:"right",children:(0,t.jsx)("span",{children:(0,t.jsx)(r.w48,{})})})})})}),(0,t.jsx)("li",{children:(0,t.jsx)(u(),{href:"/admin/register",passHref:!0,children:(0,t.jsx)("a",{className:"".concat("/admin/register"===m&&"bg-slate-500"),children:(0,t.jsx)(f.u,{label:"Register User",placement:"right",children:(0,t.jsx)("span",{children:(0,t.jsx)(c.zy7,{})})})})})}),(0,t.jsx)("li",{children:(0,t.jsx)(u(),{href:"/admin/report",passHref:!0,children:(0,t.jsx)("a",{className:"".concat("/admin/report"===m&&"bg-slate-500"),children:(0,t.jsx)(f.u,{label:"Issue A Report",placement:"right",children:(0,t.jsx)("span",{children:(0,t.jsx)(o.rkW,{})})})})})})]}),(0,t.jsx)("li",{className:"mt-auto",children:(0,t.jsx)("a",{onClick:g,children:(0,t.jsx)(f.u,{label:"Logout",placement:"right",children:(0,t.jsx)("span",{className:"text-red-500",children:(0,t.jsx)(a.LvP,{})})})})})]})}),(0,t.jsxs)("div",{className:"flex-1 bg-slate-100 overflow-x-scroll",children:[(0,t.jsx)(Q,{}),(0,t.jsx)("div",{className:"relative w-full",children:e.children})]})]})}},2740:function(e,n,s){"use strict";var t=s(5893),i=(s(7294),s(381)),r=s.n(i),l=s(1664),a=s.n(l),c=s(8790);n.Z=function(e){var n,s=e.notification,i=e.onClick;return"TICKET_COMMENT"===s.type?n=(0,t.jsxs)(c.xv,{children:[(0,t.jsx)(c.xv,{as:"span",fontWeight:"semibold",children:s.actor})," ","commented on ticket ",s.payload.ticket_id,":",' "',s.payload.comment_body.slice(0,30),"...",'"']}):"TICKET_PROGRESS"===s.type?n=(0,t.jsxs)(c.xv,{children:[(0,t.jsx)(c.xv,{as:"span",fontWeight:"semibold",children:s.actor})," ","take your ticket with ID: ",s.payload.ticket_id]}):"TICKET_CLOSED"===s.type?n=(0,t.jsxs)(c.xv,{children:[(0,t.jsx)(c.xv,{as:"span",fontWeight:"semibold",children:s.actor})," ","closed a ticket with ID: ",s.payload.ticket_id]}):"TICKET_CREATE"===s.type&&(n=(0,t.jsxs)(c.xv,{children:[(0,t.jsx)(c.xv,{as:"span",fontWeight:"semibold",children:s.actor})," ","created a ticket with ID: ",s.payload.ticket_id," about"," ",s.payload.subject," at ",s.payload.event_location]})),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a(),{href:"/ticket/".concat(s.payload.ticket_id),children:(0,t.jsxs)(c.kC,{bg:"UNREAD"===s.status?"blackAlpha.100":"transparent",p:4,borderLeft:"UNREAD"===s.status?"4px":null,borderColor:"limegreen",justifyContent:"space-between",gap:4,cursor:"pointer",onClick:i,_hover:{backgroundColor:"blackAlpha.200"},children:[n,(0,t.jsx)(c.xv,{fontSize:"xs",whiteSpace:"nowrap",color:"gray.600",children:r()(s.created_at).fromNow()})]})}),(0,t.jsx)(c.iz,{})]})}},5:function(e){e.exports={header:"Header_header__lyvpD",profile:"Header_profile__1Hr4t"}},2884:function(e){e.exports={sidebar:"SideBarLayout_sidebar__uF_VV"}}}]);